## 5.4 연관관계의 주인

객체에는 양방향 연관관계라는 것이 없다. 서로 다른 단방향 연관관계 2개를 애플리케이션 로직으로 잘 묶어서 양방향인 것처럼 보이게 할 뿐이다.

테이블은 외래 키 하나로 두 테이블의 연관관계를 관리한다. 엔티티를 양방향 연관관계로 설정하는 객체의 참조는 둘인데 외래 키는 하나다. 

두 객체 연관관계 중 외래키를 관리하는 쪽을 **연관관계의 주인**이라고 한다.

<br>

### 외래 키 관리자

**연관관계의 주인만이 외래 키를 관리(등록, 수정, 삭제)**할 수 있고, 주인이 아닌 쪽은 읽기만 가능하다.

**즉, 연관관계의 주인을 정한다는 것은 외래 키 관리자를 선택하는 것이다**. 

연관관계의 주인은 외래 키의 위치와 관련해서 정해야지 비즈니스 중요도로 접근하면 안된다.

+ 주인은 mappedBy 속성을 사용하지 않는다.
+ 주인이 아니면 mappedBy 속성을 사용해서 속성의 값으로 연관관계의 주인을 지정해야 한다.

<br>

연관관계의 주인만 데이터베이스 연관관계와 매핑되고 외래 키를 관리할 수 있다. 주인이 아닌 쪽은 읽기만 가능하고 외래 키를 변경할 수 없다.

<br>

데이터베이스 테이블의 다대일(ManyToOne), 일대다(OneToMany) 관계에서는 항상 **다(Many) 쪽이 외래 키를 가진다**. 

> 일대다를 연관관계의 주인으로 선택하는 것이 불가능하지는 않지만, 성능과 관리 측면에서 권장하지 않는다.

다(Many) 쪽인 `@ManyToOne`은 항상 연관관계의 주인이 되므로 mappedBy를 설정할 수 없다. 따라서 `@ManyToOne`에는 mappedBy 속성이 없다.